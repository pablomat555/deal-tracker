# locales.py
import streamlit as st
import config

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–∑—ã–∫–∞ –≤ —Å–µ—Å—Å–∏–∏, –µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
if 'lang' not in st.session_state:
    st.session_state['lang'] = 'ru'

TRANSLATIONS = {
    'ru': {
        'language_selector_label': "üåê –Ø–∑—ã–∫ / Language",

        # --- –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ ---
        'page_manual_entry_title': "–†—É—á–Ω–æ–π –í–≤–æ–¥",
        'page_manual_entry_header': "–†—É—á–Ω–æ–π –í–≤–æ–¥ –î–∞–Ω–Ω—ã—Ö",
        'add_trade_subheader': "–î–æ–±–∞–≤–∏—Ç—å —Å–¥–µ–ª–∫—É",
        'optional_params_expander': "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (SL/TP, –∫–æ–º–∏—Å—Å–∏—è, –∑–∞–º–µ—Ç–∫–∏)",
        'fee_config_header': "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∏—Å—Å–∏–∏",
        'fee_type_label': "–¢–∏–ø –∫–æ–º–∏—Å—Å–∏–∏",
        'fee_type_percent': "–ü—Ä–æ—Ü–µ–Ω—Ç",
        'fee_type_fixed': "–§–∏–∫—Å. —Å—É–º–º–∞",
        'fee_percent_label': "–ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏ (–Ω–∞–ø—Ä., 0.1)",
        'fee_fixed_amount_label': "–¢–æ—á–Ω–∞—è —Å—É–º–º–∞ –∫–æ–º–∏—Å—Å–∏–∏",
        'col_commission_asset': "–í–∞–ª—é—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏",
        'add_trade_button': "–î–æ–±–∞–≤–∏—Ç—å —Å–¥–µ–ª–∫—É",
        'success_trade_added': "‚úÖ –°–¥–µ–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!",
        'col_symbol_placeholder': "–°–∏–º–≤–æ–ª (–Ω–∞–ø—Ä., BTC/USDT)",
        'col_asset_placeholder': "–ê–∫—Ç–∏–≤ (–Ω–∞–ø—Ä., USDT)",
        'col_time': "–í—Ä–µ–º—è",
        'add_button': "–î–æ–±–∞–≤–∏—Ç—å",
        'processing': "–û–±—Ä–∞–±–æ—Ç–∫–∞...",
        'error_fields_required': "–ü–æ–ª—è '–°–∏–º–≤–æ–ª', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ' –∏ '–¶–µ–Ω–∞' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å > 0.",
        'error_asset_amount_required': "–ü–æ–ª—è '–ê–∫—Ç–∏–≤' –∏ '–°—É–º–º–∞' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å > 0.",
        'error_generic': "–û—à–∏–±–∫–∞",
        'success_movement_added': "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è '{m_type}' —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!",
        'col_destination_account': "–°—á–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–ö–£–î–ê)",
        'col_source_account': "–°—á–µ—Ç —Å–ø–∏—Å–∞–Ω–∏—è (–û–¢–ö–£–î–ê)",
        'tab_trades': "üìà –°–¥–µ–ª–∫–∏",
        'tab_movements': "üí∏ –î–≤–∏–∂–µ–Ω–∏—è –°—Ä–µ–¥—Å—Ç–≤",
        'manual_entry_caption': "–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º—É.",
        'add_movement_subheader': "–î–æ–±–∞–≤–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤",

        # --- –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ –¥–∞—à–±–æ—Ä–¥–∞ ---
        'page_portfolio_title': "–ü–æ—Ä—Ç—Ñ–µ–ª—å",
        'page_portfolio_header': "üìä –ü–æ—Ä—Ç—Ñ–µ–ª—å –∏ –ë–∞–ª–∞–Ω—Å—ã –°—á–µ—Ç–æ–≤",
        'col_purchase_value': "–°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏",
        'col_price_change_pct': "–†–æ—Å—Ç/–ü–∞–¥–µ–Ω–∏–µ, %",
        'total_selected_assets_value': "–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤",
        'asset_allocation_header': "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –∞–∫—Ç–∏–≤–∞–º",
        'asset_distribution_title': "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∞–∫—Ç–∏–≤–∞–º",
        'location_allocation_header': "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –±–∏—Ä–∂–∞–º/—Å—á–µ—Ç–∞–º",
        'location_distribution_title': "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é",
        'asset_details_header': "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–æ–≤",
        'app_title': "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –î—ç—à–±–æ—Ä–¥",
        'update_button': "üîÑ –û–±–Ω–æ–≤–∏—Ç—å",
        'refresh_page_button': "üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ",
        'data_from': "–î–∞–Ω–Ω—ã–µ –æ—Ç",
        'details_by_asset': "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–∞–º",
        'filters_header': "–§–∏–ª—å—Ç—Ä—ã",
        'filter_by_exchange': "–§–∏–ª—å—Ç—Ä –ø–æ –±–∏—Ä–∂–∞–º",
        'filter_by_symbol': "–§–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤–∞–º",
        'filter_by_account': "–§–∏–ª—å—Ç—Ä –ø–æ –±–∏—Ä–∂–µ/—Å—á–µ—Ç—É:",
        'filter_by_asset': "–§–∏–ª—å—Ç—Ä –ø–æ –º–æ–Ω–µ—Ç–µ",
        'all_exchanges': "–í—Å–µ –±–∏—Ä–∂–∏",
        'all_symbols': "–í—Å–µ —Å–∏–º–≤–æ–ª—ã",
        'select_account_warning': "–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å—á–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.",
        'investments_header': "üìà –ê–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏",
        'trading_results_header': "üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ—Ä–≥–æ–≤–ª–∏",
        'capital_overview_header': "–û–±–∑–æ—Ä –∫–∞–ø–∏—Ç–∞–ª–∞",
        'unrealized_pnl': "–ù–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PNL",
        'total_equity': "–û–±—â–∏–π –∫–∞–ø–∏—Ç–∞–ª",
        'net_invested': "–í–ª–æ–∂–µ–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤",
        'total_pnl': "–û–±—â–∏–π PNL",
        'realized_pnl': "–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PNL",
        'win_rate': "Win Rate",
        'profit_factor': "Profit Factor",
        'total_closed_trades': "–ó–∞–∫—Ä—ã—Ç–æ —Å–¥–µ–ª–æ–∫",
        'portfolio_structure_header': "–û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è",
        'chart_asset_value': "–°—Ç–æ–∏–º–æ—Å—Ç—å –∞–∫—Ç–∏–≤–æ–≤ –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ",
        'chart_asset': "–ê–∫—Ç–∏–≤",
        'chart_value': "–°—Ç–æ–∏–º–æ—Å—Ç—å",
        'fifo_details_header': "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫ (FIFO)",
        'core_trades_header': "–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",
        'stablecoin_summary_header': "üí∞ –°–≤–æ–¥–∫–∞ –ø–æ —Å–≤–æ–±–æ–¥–Ω—ã–º —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–∞–º",
        'total_stablecoins': "–û–±—â–∏–π –±–∞–ª–∞–Ω—Å —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤ (–≤ USD —ç–∫–≤.)",
        'portfolio_details_header': "üìà –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è",
        'capital_structure_header': "–û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–ø–∏—Ç–∞–ª–∞",
        'capital_distribution_chart_title': '–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞',
        'crypto_details_expander': "–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç",
        'crypto_only_structure_title': '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ (–ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)',
        'portfolio_details_subheader': "–¢–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤",
        'category_crypto': '–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã',
        'category_stables': '–°—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã',
        'page_movements_title': "–î–≤–∏–∂–µ–Ω–∏–µ –°—Ä–µ–¥—Å—Ç–≤",
        'page_movements_header': "üåä –î–≤–∏–∂–µ–Ω–∏–µ –°—Ä–µ–¥—Å—Ç–≤",
        'external_source': "–í–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫",
        'external_destination': "–í–Ω–µ—à–Ω–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
        '–í—Å–µ–≥–æ –≤–≤–µ–¥–µ–Ω–æ': "–í—Å–µ–≥–æ –≤–≤–µ–¥–µ–Ω–æ",
        '–í—Å–µ–≥–æ –≤—ã–≤–µ–¥–µ–Ω–æ': "–í—Å–µ–≥–æ –≤—ã–≤–µ–¥–µ–Ω–æ",
        '–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π': "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π",
        'sl_tp_expander': "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: Stop Loss / Take Profit",
        'col_symbol': "–ê–∫—Ç–∏–≤",
        'col_exchange': "–ë–∏—Ä–∂–∞",
        'col_qty': "–ö–æ–ª-–≤–æ",
        'col_amount': "–ö–æ–ª-–≤–æ",
        'col_avg_entry': "–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞",
        'col_price': "–¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è",
        'current_price': "–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞",
        'col_value': f"–°—Ç–æ–∏–º–æ—Å—Ç—å, {config.BASE_CURRENCY}",
        'col_share': "–î–æ–ª—è, %",
        'col_pnl_percent': "–ü—Ä–∏–±—ã–ª—å, %",
        'col_pnl_sum': f"–ü—Ä–∏–±—ã–ª—å, {config.BASE_CURRENCY}",
        'current_pnl': f"–ù–µ—Ä–µ–∞–ª. PNL, {config.BASE_CURRENCY}",
        'col_notes': "–ó–∞–º–µ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        'col_opened': "–î–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è",
        'col_buy_price': "–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏",
        'col_sell_price': "–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏",
        'col_pnl_fifo': f"–ü—Ä–∏–±—ã–ª—å, {config.BASE_CURRENCY}",
        'col_buy_id': "ID –ü–æ–∫—É–ø–∫–∏",
        'col_sell_id': "ID –ü—Ä–æ–¥–∞–∂–∏",
        'col_order_id': "ID –û—Ä–¥–µ—Ä–∞",
        'col_commission': "–ö–æ–º–∏—Å—Å–∏—è",
        'col_fee_asset': "–í–∞–ª—é—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏",
        'col_trade_pnl': f"–ü—Ä–∏–±—ã–ª—å —Å–¥–µ–ª–∫–∏, {config.BASE_CURRENCY}",
        'col_date': '–î–∞—Ç–∞',
        'col_type': '–¢–∏–ø',
        'col_from': '–û—Ç–∫—É–¥–∞',
        'col_to': '–ö—É–¥–∞',
        'col_currency': '–í–∞–ª—é—Ç–∞',
        'col_asset_source': '–ê–∫—Ç–∏–≤/–°—á–µ—Ç',
        'col_value_currency': f'–°—Ç–æ–∏–º–æ—Å—Ç—å, {config.BASE_CURRENCY}',
        'col_share_percent': '–î–æ–ª—è, %',
        'col_icon': "–ò–∫–æ–Ω–∫–∞",
        'col_icon_label': " ",
        'col_asset': "–ê–∫—Ç–∏–≤",
        'col_location': "–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
        'col_current_price': "–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞",
        'closed_trades_header': "üìà –£—á–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫ (FIFO)",
        'col_timestamp_closed': "–î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è",
        'col_sl': "SL",
        'col_tp1': "TP1",
        'col_tp2': "TP2",
        'col_tp3': "TP3",
        'risk_overview_header': "–û–±–∑–æ—Ä –†–∏—Å–∫–æ–≤ –ø–æ –ü–æ–∑–∏—Ü–∏—è–º",
        'col_risk_usd': "–†–∏—Å–∫, $",
        'open_trades_header': "–ê–Ω–∞–ª–∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–ø–æ –ª–æ—Ç–∞–º)",
        'col_date_buy': "–î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏",
        'col_qty_deal': "–ö–æ–ª-–≤–æ –≤ —Å–¥–µ–ª–∫–µ",
        'col_qty_left': "–û—Å—Ç–∞—Ç–æ–∫",
        'show_more_button': "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ 10",
        'no_movements_data': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –¥–≤–∏–∂–µ–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤.",
        'no_stablecoin_data': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –±–∞–ª–∞–Ω—Å–∞—Ö —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.",
        'no_capital_structure_data': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞–ø–∏—Ç–∞–ª–∞.",
        'no_crypto_for_details': "–ù–µ—Ç –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.",
        'no_crypto_in_accounts': "–ù–µ—Ç –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å—á–µ—Ç–∞—Ö.",
        'no_portfolio_data': "–î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è –Ω–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã.",
        'no_data_for_analytics': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—â–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.",
        'no_open_positions': "–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π.",
        'no_open_positions_to_display': "–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞–º.",
        'no_data_in_table': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ.",
        'select_exchange_warning': "–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –±–∏—Ä–∂—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.",
        'no_positive_value_assets': "–ù–µ—Ç –∞–∫—Ç–∏–≤–æ–≤ —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞.",
        'no_trading_results': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Ç–æ—Ä–≥–æ–≤–ª–∏.",
        'no_closed_deals_data': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–∫–∞—Ö.",
        'no_closed_deals_after_filter': "–ù–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞–º.",
        'no_trades_loaded': "–î–∞–Ω–Ω—ã–µ –æ —Å–¥–µ–ª–∫–∞—Ö –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.",
        'no_core_records': "–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–æ–≤—ã—Ö —Å–¥–µ–ª–∫–∞—Ö (Core Trades).",
        'no_portfolio_data_after_filter': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º.",
        'no_data_for_display': "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞–º.",
        'no_risk_data': "–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Stop Loss –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∏—Å–∫–æ–≤.",
        '–ë–∏—Ä–∂–∞/–°—á–µ—Ç': "–ë–∏—Ä–∂–∞/–°—á–µ—Ç",
        '–ê–∫—Ç–∏–≤': "–ê–∫—Ç–∏–≤",
        '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤': "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤",
        '–°—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã –ø–æ —Å—á–µ—Ç–∞–º': "–°—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã –ø–æ —Å—á–µ—Ç–∞–º",
        '–°—á–µ—Ç': "–°—á–µ—Ç",
        '–°—É–º–º–∞, $': "–°—É–º–º–∞, $",
        '–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è': "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è",
        'timezone_setting_label': "–í–∞—à —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å (—Å–º–µ—â–µ–Ω–∏–µ –æ—Ç UTC)",
        'timezone_setting_help': "–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç UTC. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è UTC+3 –≤–≤–µ–¥–∏—Ç–µ 3.",
        'period_selector_label': "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞:",
        'delta_format_string': "{value:+.2f}% / {period}",
        'period_day': "–î–µ–Ω—å",
        'period_month': "–ú–µ—Å—è—Ü",
        'period_year': "–ì–æ–¥",
        'page_manage_trades_title': "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°–¥–µ–ª–∫–∞–º–∏",
        'page_manage_trades_header': "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°–¥–µ–ª–∫–∞–º–∏",
        'error_loading_data_expander': "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö",
        'refresh_data_button': "–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫",
        'no_core_trades_to_manage': "–ù–µ—Ç —Å–¥–µ–ª–æ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.",
        'select_trades_to_delete_header': "–í—ã–±–µ—Ä–∏—Ç–µ —Å–¥–µ–ª–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è",
        'select_trades_to_delete_label': "–°–¥–µ–ª–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è",
        'delete_confirmation_header': "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è",
        'delete_warning': "–í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ! –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤—ã–±—Ä–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏.",
        'you_have_selected_for_deletion': "–í—ã –≤—ã–±—Ä–∞–ª–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–¥–µ–ª–∫–∏:",
        'delete_button_confirm': "–î–∞, —É–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏",
        'deleting_in_progress': "–£–¥–∞–ª–µ–Ω–∏–µ... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.",
        'delete_success_message': "–£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ {count} —Å–¥–µ–ª–æ–∫.",
        'delete_post_action_info': "–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã. –°–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω.",
        'delete_error_message': "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–¥–µ–ª–æ–∫.",
    },
    'en': {
        'language_selector_label': "üåê Language / –Ø–∑—ã–∫",
        
        # --- Translations for Manual Entry page ---
        'page_manual_entry_title': "Manual Entry",
        'page_manual_entry_header': "Manual Data Entry",
        'add_trade_subheader': "Add Trade",
        'optional_params_expander': "Optional Parameters (SL/TP, Fee, Notes)",
        'fee_config_header': "Fee Configuration",
        'fee_type_label': "Fee Type",
        'fee_type_percent': "Percentage",
        'fee_type_fixed': "Fixed Amount",
        'fee_percent_label': "Fee Percentage (e.g., 0.1)",
        'fee_fixed_amount_label': "Exact Fee Amount",
        'col_commission_asset': "Fee Asset",
        'add_trade_button': "Add Trade",
        'success_trade_added': "‚úÖ Trade added successfully!",
        'col_symbol_placeholder': "Symbol (e.g., BTC/USDT)",
        'col_asset_placeholder': "Asset (e.g., USDT)",
        'col_time': "Time",
        'add_button': "Add",
        'processing': "Processing...",
        'error_fields_required': "Fields 'Symbol', 'Quantity', and 'Price' are required and must be > 0.",
        'error_asset_amount_required': "Fields 'Asset' and 'Amount' are required and must be > 0.",
        'error_generic': "Error",
        'success_movement_added': "‚úÖ Operation '{m_type}' added successfully!",
        'col_destination_account': "Destination Account (TO)",
        'col_source_account': "Source Account (FROM)",
        'tab_trades': "üìà Trades",
        'tab_movements': "üí∏ Fund Movements",
        'manual_entry_caption': "This page is for manually adding trades and financial transactions to the system.",
        'add_movement_subheader': "Add Fund Movement",

        # --- Translations for Portfolio page ---
        'page_portfolio_title': "Portfolio",
        'page_portfolio_header': "üìä Portfolio & Account Balances",
        'col_purchase_value': "Purchase Value",
        'col_price_change_pct': "Price Change, %",
        'total_selected_assets_value': "Total Value of Selected Assets",
        'asset_allocation_header': "Asset Allocation",
        'asset_distribution_title': "Asset Distribution",
        'location_allocation_header': "Structure by Exchange/Account",
        'location_distribution_title': "Distribution by Location",
        'asset_details_header': "Asset Details",

        # --- Common keys ---
        'app_title': "Financial Dashboard",
        'update_button': "üîÑ Refresh",
        'refresh_page_button': "üîÑ Refresh Data",
        'data_from': "Data from",
        'details_by_asset': "Breakdown by asset",
        'filters_header': "Filters",
        'filter_by_exchange': "Filter by Exchanges",
        'filter_by_symbol': "Filter by Symbols",
        'filter_by_account': "Filter by exchange/account:",
        'filter_by_asset': "Filter by Asset",
        'all_exchanges': "All exchanges",
        'all_symbols': "All symbols",
        'select_account_warning': "Select at least one account to display data.",
        'investments_header': "üìà Active Investments",
        'trading_results_header': "üèÜ Trading Results",
        'capital_overview_header': "Capital Overview",
        'unrealized_pnl': "Unrealized PNL",
        'total_equity': "Total Equity",
        'net_invested': "Net Invested",
        'total_pnl': "Total PNL",
        'realized_pnl': "Realized PNL",
        'win_rate': "Win Rate",
        'profit_factor': "Profit Factor",
        'total_closed_trades': "Trades Closed",
        'portfolio_structure_header': "Overall Portfolio Structure",
        'chart_asset_value': "Value of Assets in Portfolio",
        'chart_asset': "Asset",
        'chart_value': "Value",
        'fifo_details_header': "Closed Deals Details (FIFO)",
        'core_trades_header': "All Transactions History",
        'stablecoin_summary_header': "üí∞ Free Stablecoins Summary",
        'total_stablecoins': "Total balance of stablecoins (in USD)",
        'portfolio_details_header': "üìà Entire Portfolio Breakdown",
        'capital_structure_header': "Overall Capital Structure",
        'capital_distribution_chart_title': 'Capital Distribution',
        'crypto_details_expander': "Show cryptocurrency breakdown",
        'crypto_only_structure_title': 'Cryptocurrency Asset Structure (by value)',
        'portfolio_details_subheader': "Assets Table",
        'category_crypto': 'Cryptocurrencies',
        'category_stables': 'Stablecoins',
        'page_movements_title': "Fund Movements",
        'page_movements_header': "üåä Fund Movements",
        'external_source': "External Source",
        'external_destination': "External Destination",
        '–í—Å–µ–≥–æ –≤–≤–µ–¥–µ–Ω–æ': "Total Deposited",
        '–í—Å–µ–≥–æ –≤—ã–≤–µ–¥–µ–Ω–æ': "Total Withdrawn",
        '–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π': "Movements Details",
        'sl_tp_expander': "Optional: Stop Loss / Take Profit",
        'col_symbol': "Asset",
        'col_exchange': "Exchange",
        'col_qty': "Qty",
        'col_amount': "Amount",
        'col_avg_entry': "Avg. Entry",
        'col_price': "Execution Price",
        'current_price': "Current Price",
        'col_value': f"Value, {config.BASE_CURRENCY}",
        'col_share': "Share, %",
        'col_pnl_percent': "Profit, %",
        'col_pnl_sum': f"Profit, {config.BASE_CURRENCY}",
        'current_pnl': f"Unreal. PNL, {config.BASE_CURRENCY}",
        'col_notes': "Notes (optional)",
        'col_opened': "Date Opened",
        'col_buy_price': "Buy Price",
        'col_sell_price': "Sell Price",
        'col_pnl_fifo': f"Profit, {config.BASE_CURRENCY}",
        'col_buy_id': "Buy ID",
        'col_sell_id': "Sell ID",
        'col_order_id': "Order ID",
        'col_commission': "Fee",
        'col_fee_asset': "Fee Asset",
        'col_trade_pnl': f"Trade PNL, {config.BASE_CURRENCY}",
        'col_date': 'Date',
        'col_type': 'Type',
        'col_from': 'From',
        'col_to': 'To',
        'col_currency': 'Currency',
        'col_asset_source': 'Asset/Account',
        'col_value_currency': f'Value, {config.BASE_CURRENCY}',
        'col_share_percent': 'Share, %',
        'col_icon': "Icon",
        'col_icon_label': " ",
        'col_asset': "Asset",
        'col_location': "Location",
        'col_current_price': "Current Price",
        'closed_trades_header': "üìà Closed Trades Record (FIFO)",
        'col_timestamp_closed': "Date Closed",
        'col_sl': "SL",
        'col_tp1': "TP1",
        'col_tp2': "TP2",
        'col_tp3': "TP3",
        'risk_overview_header': "Position Risk Overview",
        'col_risk_usd': "Risk, $",
        'open_trades_header': "Open Trades Analysis (by Lots)",
        'col_date_buy': "Buy Date",
        'col_qty_deal': "Deal Qty",
        'col_qty_left': "Remainder",
        'show_more_button': "Show 10 more",
        'no_movements_data': "No fund movement data available.",
        'no_stablecoin_data': "No stablecoin balance data to display.",
        'no_capital_structure_data': "No data to display the overall capital structure.",
        'no_crypto_for_details': "No cryptocurrency assets to show in breakdown.",
        'no_crypto_in_accounts': "No cryptocurrency assets in the selected accounts.",
        'no_portfolio_data': "Data for building the portfolio has not been generated.",
        'no_data_for_analytics': "No data for general analytics.",
        'no_open_positions': "No open positions at the moment.",
        'no_open_positions_to_display': "No open positions match the filters.",
        'no_data_in_table': "No data to display in the table.",
        'select_exchange_warning': "Select at least one exchange to display data.",
        'no_positive_value_assets': "No assets with a positive value to build the chart.",
        'no_trading_results': "No trading results data available.",
        'no_closed_deals_data': "No closed trades data available.",
        'no_closed_deals_after_filter': "No closed deals match the filters.",
        'no_trades_loaded': "Trade data has not been loaded.",
        'no_core_records': "No records in Core Trades.",
        'no_portfolio_data_after_filter': "No data for the selected filters.",
        'no_data_for_display': "No data matching the filters.",
        'no_risk_data': "No open positions with a Stop Loss set for risk analysis.",
        '–ë–∏—Ä–∂–∞/–°—á–µ—Ç': "Exchange/Account",
        '–ê–∫—Ç–∏–≤': "Asset",
        '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤': "Stablecoin Structure",
        '–°—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã –ø–æ —Å—á–µ—Ç–∞–º': "Stablecoins by Account",
        '–°—á–µ—Ç': "Account",
        '–°—É–º–º–∞, $': "Amount, $",
        '–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è': "Full Portfolio Details",
        'timezone_setting_label': "Your Timezone (UTC Offset)",
        'timezone_setting_help': "Specify your offset from UTC. For example, for UTC+3, enter 3.",
        'period_selector_label': "Change over:",
        'delta_format_string': "{value:+.2f}% vs {period}",
        'period_day': "Day",
        'period_month': "Month",
        'period_year': "Year",
        'page_manage_trades_title': "Manage Trades",
        'page_manage_trades_header': "Manage Trades",
        'error_loading_data_expander': "Errors detected while reading data",
        'refresh_data_button': "Refresh Trades List",
        'no_core_trades_to_manage': "No trades to manage.",
        'select_trades_to_delete_header': "Select trades to delete",
        'select_trades_to_delete_label': "Trades to delete",
        'delete_confirmation_header': "Deletion Confirmation",
        'delete_warning': "WARNING: This action is irreversible! Deleted rows cannot be recovered. Make sure you have selected the correct trades.",
        'you_have_selected_for_deletion': "You have selected the following trades for deletion:",
        'delete_button_confirm': "Yes, delete selected trades",
        'deleting_in_progress': "Deleting... Please wait.",
        'delete_success_message': "Successfully deleted {count} trades.",
        'delete_post_action_info': "Data updated. The trade list has been reloaded.",
        'delete_error_message': "An error occurred while deleting trades.",
    }
}

def t(key):
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞.
    –ï—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º –∫–ª—é—á –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ—Ç–ª–∞–¥–∫–∏.
    """
    lang = st.session_state.get('lang', 'ru')
    return TRANSLATIONS.get(lang, {}).get(key, key)

def render_language_selector():
    """
    [–ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø]
    –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–∏–¥–∂–µ—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞.
    –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —è–∑—ã–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.
    """
    lang_options = ['ru', 'en']
    lang_display = {'ru': '–†—É—Å—Å–∫–∏–π', 'en': 'English'}

    current_lang = st.session_state.get('lang', 'ru')
    try:
        lang_index = lang_options.index(current_lang)
    except ValueError:
        lang_index = 0 # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 'ru'

    # –í–∏–¥–∂–µ—Ç –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
    selected_lang = st.radio(
        label=t('language_selector_label'),
        options=lang_options,
        index=lang_index,
        format_func=lambda lang_code: lang_display.get(lang_code, lang_code),
        horizontal=True,
        key='language_selector' # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞
    )

    # –û–±–Ω–æ–≤–ª—è–µ–º —è–∑—ã–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–µ—Å—Å–∏–∏, –µ—Å–ª–∏ –æ–Ω –∏–∑–º–µ–Ω–∏–ª—Å—è
    if selected_lang != st.session_state.get('lang'):
        st.session_state['lang'] = selected_lang
        st.rerun()